<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Timetable</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <h1>Event Timetable</h1>
</header>

<main>
    <div id="date-buttons">
        <button class="date-btn" data-date="Thurs 11 Sept">Thurs 11 Sept</button>
        <button class="date-btn" data-date="Fri 12 Sept">Fri 12 Sept</button>
        <button class="date-btn" data-date="Sat 13 Sept">Sat 13 Sept</button>
        <button class="date-btn" data-date="Sun 14 Sept">Sun 14 Sept</button>
    </div>

    <div id="event-table">
        <table>
            <thead>
                <tr>
                    <th>Time</th>
                    <th>Event</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="event-list"></tbody>
        </table>
    </div>
</main>

<script>
    const eventList = document.getElementById('event-list');
    const dateButtons = document.querySelectorAll('.date-btn');
    
    // Event data structure
    const events = {
        "Thurs 11 Sept": [
            { time: "10:00 AM", event: "AGM" },
            { time: "11:00 AM", event: "Workshop 1" },
            { time: "1:00 PM", event: "Lunch Break" }
        ],
        "Fri 12 Sept": [
            { time: "9:00 AM", event: "Keynote Speaker" },
            { time: "11:00 AM", event: "Workshop 2" },
            { time: "2:00 PM", event: "Panel Discussion" }
        ],
        "Sat 13 Sept": [
            { time: "10:00 AM", event: "Workshop 3" },
            { time: "12:00 PM", event: "Lunch Break" },
            { time: "1:30 PM", event: "Closing Remarks" }
        ],
        "Sun 14 Sept": [
            { time: "9:00 AM", event: "Final Workshop" },
            { time: "11:00 AM", event: "Award Ceremony" }
        ]
    };

    // Function to display events based on the selected date
    function displayEvents(date) {
        // Clear existing events
        eventList.innerHTML = "";

        // Retrieve the events for the selected date
        const selectedEvents = events[date] || [];

        selectedEvents.forEach(event => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${event.time}</td>
                <td>${event.event}</td>
                <td><button class="add-event-btn" data-time="${event.time}" data-event="${event.event}">Add to Planner</button></td>
            `;
            eventList.appendChild(row);
        });
    }

    // Event listener for date buttons
    dateButtons.forEach(button => {
        button.addEventListener('click', function() {
            const selectedDate = this.getAttribute('data-date');
            displayEvents(selectedDate);
        });
    });

    // Event listener for 'Add to Planner' buttons
    eventList.addEventListener('click', function(event) {
        if (event.target && event.target.classList.contains('add-event-btn')) {
            const eventTime = event.target.getAttribute('data-time');
            const eventName = event.target.getAttribute('data-event');
            
            // Create an object with the event details
            const eventDetails = {
                time: eventTime,
                name: eventName
            };

            // Retrieve the current planner or initialize it
            let planner = JSON.parse(localStorage.getItem('personalPlanner')) || [];

            // Add the new event to the planner
            planner.push(eventDetails);

            // Save the updated planner to localStorage
            localStorage.setItem('personalPlanner', JSON.stringify(planner));

            alert(`${eventName} at ${eventTime} added to your planner!`);
        }
    });
</script>

</body>
</html>
